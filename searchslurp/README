
first start mongo with
$ run_mongo.sh

----------------------------------------------------

collect tweets with...
$ ./collect.rb "#worldcup"

this starts the slurp and loads docs into directly into mongo
filters to only load new tweets since search api returns multiples,
especially after stopping/starting collection process

-----------------------------------------------------

if we need to change what preparsing of date we want
(eg want to tokenise on collection)

we can stop collect.rb
make the change
start collect.rb
and then catch up the existing documents with a call to update_existing_documents.rb
(after editing update_existing_documents.rb of course)

------------------------------

for poking around in irb...
irb> require 'rubygems'; require 'mongo'; mongo = Mongo::Connection.new;db = mongo.db 'tweets';col = db['tweets']



-----------------------

starting collecting at...
Sat Jun 12 12:29:25 +1000 2010


1   12/06 00:00	    Johannesburg - JSC		South Africa	1:1 (0:0)	Mexico	
2   12/06 04:30	    Cape Town	   Uruguay	0:0   France	
3   13/06 00:00	    Johannesburg - JEP		      Argentina	1:0 (1:0)	Nigeria	
4   12/06 21:30	    Nelson Mandela Bay/Port Elizabeth 		Korea Republic	2:0 (2:0)	Greece	
5   13/06 04:30	    Rustenburg	   	    England		1:1 (1:1)	USA 
6   13/06 21:30	    Polokwane		    			Algeria		0:1 (0:0)	Slovenia	
7   14/06 04:30	    Durban							Germany		4:0 (2:0)	Australia 
8   14/06 00:00	    Tshwane/Pretoria								Serbia		0:1 (0:0) Ghana 

plot of use of #country_icons

$ ./dump_tweets.rb > tweets
$ cat tweets | ./extract_tokens.rb | sort | uniq -c > freq_dts_token
$ grep "goal\|aus\|ger\|worldcup" freq_dts_token  | ./write_html.rb > test.html

2010_6_13_15 -> 2010_6_14_15

--- top country code freqs

cat tweets | ./country_codes.rb | sort | uniq -c > country_codes_freqs.tsv

--- top tokens (per country)

$ ./dump_tweets.rb > tweets
$ cat tweets | ./country_code_pairs.rb > country_code_pairs
$ cat country_code_pairs | sort | uniq -c | perl -plne's/^\s+//;s/ /\t/;' > country_code_pairs.freqs
$ pig -x local -p input=country_code_pairs.freqs -p output=top5_country_code_pairs.tsv top_per_country.pig 

displaying a graph for just the top 30 edges (by frequency) 
$ sort -nr country_code_pairs.freqs | head -30 | ./remove_leading_frequency.pl | ./dotify.rb | ./dotify.rb | dot -Tpng > test.png


--------------------------

been working on some processing viz
for it we need a dataset with code/time/freq 
to animate 

# extract token freqs
$ cat tweets | ./extract_tokens.rb | sort | uniq -c > token_freqs

# bake it into a form that loadable with....
$ cat token_freqs | ./token_freqs_to_load_data.rb
